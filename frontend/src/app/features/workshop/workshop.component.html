<div class="workshop-page">
  <div class="page-header">
    <h1>Workshop - Experimental Layout</h1>
    <p class="subtitle">
      Drag and resize panels to customize your workspace. Layout is saved
      automatically.
    </p>
  </div>

  <!-- Active Filters Summary -->
  <div class="filters-summary" *ngIf="hasActiveFilters">
    <div class="summary-content">
      <span class="summary-label">Active Filters:</span>
      <span class="summary-count">{{ selectionCount }} model(s) selected</span>
    </div>
    <button nz-button nzType="primary" nzDanger (click)="onClearAll()">
      Clear All
    </button>
  </div>

  <!-- Grid Layout Container 1 (Picker Comparison + Results Table Demo) -->
  <gridster [options]="options1" class="grid-container grid-container-1">
    <!-- NEW: Table Picker Panel -->
    <gridster-item [item]="dashboard1[0]">
      <nz-collapse class="panel-collapse">
        <nz-collapse-panel
          nzHeader="Manufacturer + Model Picker (Comparison)"
          [nzActive]="!pickerComparisonCollapsed"
        >
          <div
            (mousedown)="$event.stopPropagation()"
            (touchstart)="$event.stopPropagation()"
          >
            <nz-tabset>
              <nz-tab nzTitle="Original Picker">
                <div class="tab-content">
                  <app-manufacturer-model-table-picker
                    [clearTrigger]="pickerClearTrigger"
                    [initialSelections]="pickerInitialSelections"
                    (selectionChange)="onPickerSelectionChange($event)"
                  >
                  </app-manufacturer-model-table-picker>
                </div>
              </nz-tab>

              <nz-tab nzTitle="âš¡ NEW: BaseDataTable Picker">
                <div class="tab-content">
                  <app-table-picker
                    [initialSelections]="pickerInitialSelections"
                    [clearTrigger]="pickerClearTrigger"
                    (selectionChange)="onPickerSelectionChange($event)"
                  >
                  </app-table-picker>
                </div>
              </nz-tab>
            </nz-tabset>
          </div>
        </nz-collapse-panel>
      </nz-collapse>
    </gridster-item>

    <!-- Results Table Demo Panel -->
    <gridster-item [item]="dashboard1[1]">
      <nz-collapse class="panel-collapse">
        <nz-collapse-panel
          nzHeader="Results Table (BaseDataTable Demo)"
          [nzActive]="!demoCollapsed"
        >
          <div class="demo-content" *ngIf="hasActiveFilters">
            <p class="demo-description">
              <i nz-icon nzType="experiment" nzTheme="outline"></i>
              This table uses the new BaseDataTableComponent - same data and
              functionality as below, but with ~60% less code. Drag, resize, or
              collapse this panel!
            </p>
            <app-vehicle-results-table></app-vehicle-results-table>
          </div>
          <div class="demo-content" *ngIf="!hasActiveFilters">
            <nz-empty
              nzNotFoundContent="Select models from the picker below to see results"
            ></nz-empty>
          </div>
        </nz-collapse-panel>
      </nz-collapse>
    </gridster-item>
  </gridster>

  <!-- Grid Layout Container 2 (Original: Picker + Results) -->
  <!-- <gridster [options]="options2" class="grid-container grid-container-2"> -->
  <!-- Picker Panel -->
  <!-- <gridster-item [item]="dashboard2[0]">
      <nz-collapse class="panel-collapse">
        <nz-collapse-panel
          nzHeader="Manufacturer + Model Picker"
          [nzActive]="!pickerCollapsed"
        >
          <div
            (mousedown)="$event.stopPropagation()"
            (touchstart)="$event.stopPropagation()"
          >
            <app-manufacturer-model-table-picker
              [clearTrigger]="pickerClearTrigger"
              [initialSelections]="pickerInitialSelections"
              (selectionChange)="onPickerSelectionChange($event)"
            >
            </app-manufacturer-model-table-picker>
          </div>
        </nz-collapse-panel>
      </nz-collapse>
    </gridster-item> -->

  <!-- Results Panel -->
  <!-- <gridster-item [item]="dashboard2[1]">
      <nz-collapse class="panel-collapse">
        <nz-collapse-panel
          nzHeader="Vehicle Results"
          [nzActive]="!resultsCollapsed"
        >
          <div
            (mousedown)="$event.stopPropagation()"
            (touchstart)="$event.stopPropagation()"
          >
            <app-results-table></app-results-table>
          </div>
        </nz-collapse-panel>
      </nz-collapse>
    </gridster-item> -->
  <!-- </gridster> -->
</div>
