<nz-drawer
  [nzVisible]="visible"
  [nzWidth]="700"
  nzTitle="Manage Columns"
  nzPlacement="right"
  [nzFooter]="footerTemplate"
  (nzOnClose)="onClose()"
>
  <!-- Drawer Content -->
  <ng-container *nzDrawerContent>
    <div class="column-manager-container">
      <!-- Info Section -->
      <div class="info-section">
        <nz-alert
          nzType="info"
          nzShowIcon
          nzMessage="Column Visibility"
          nzDescription="Move columns between the lists to show or hide them. Required columns cannot be hidden."
        >
        </nz-alert>

        <div class="column-stats">
          <span class="stat">
            <strong>Total:</strong> {{ getTotalCount() }}
          </span>
          <span class="stat">
            <strong>Visible:</strong> {{ getVisibleCount() }}
          </span>
          <span class="stat">
            <strong>Hidden:</strong> {{ getHiddenCount() }}
          </span>
        </div>
      </div>

      <!-- Transfer Component -->
      <div class="transfer-section">
        <nz-transfer
          [nzDataSource]="transferData"
          [nzTitles]="['Hidden Columns', 'Visible Columns']"
          [nzShowSearch]="true"
          [nzFilterOption]="filterOption"
          [nzShowSelectAll]="true"
          [nzRender]="renderTemplate"
          (nzChange)="onTransferChange($event)"
        >
          <!-- Custom Render Template -->
          <ng-template #renderTemplate let-item>
            <div class="transfer-item">
              <div class="item-title">{{ item.title }}</div>
              <div class="item-description" *ngIf="item.description">
                {{ item.description }}
              </div>
            </div>
          </ng-template>
        </nz-transfer>
      </div>
    </div>
  </ng-container>
</nz-drawer>

<!-- Footer Template (outside drawer, referenced by [nzFooter]) -->
<ng-template #footerTemplate>
  <div class="drawer-footer">
    <button nz-button nzType="default" (click)="onCancel()">Cancel</button>
    <button
      nz-button
      nzType="default"
      nzDanger
      (click)="onReset()"
      [disabled]="!canReset()"
    >
      Reset to Default
    </button>
    <button nz-button nzType="primary" (click)="onApply()">
      Apply Changes
    </button>
  </div>
</ng-template>
